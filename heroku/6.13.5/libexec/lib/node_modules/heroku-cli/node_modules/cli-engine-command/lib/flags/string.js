'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.RequiredFlagError = undefined;
exports.default = StringFlag;

var _ = require('.');

function StringFlag(options = {}) {
  const required = options.optional === false || options.required;
  const defaultOptions = {
    parse: (input, cmd, name) => {
      let value = input;
      if (!value && options.default) value = options.default;
      if (!value && required) throw new RequiredFlagError(name);
      return input;
    }
  };
  return (0, _.merge)(defaultOptions, options);
}

class RequiredFlagError extends Error {
  constructor(name) {
    super(`Missing required flag --${name}`);
  }
}
exports.RequiredFlagError = RequiredFlagError;