<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_75) on Wed Nov 11 18:31:01 PST 2015 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>BlockServiceHandler (Tachyon Servers 0.8.2 API)</title>
<meta name="date" content="2015-11-11">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="BlockServiceHandler (Tachyon Servers 0.8.2 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BlockServiceHandler.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../tachyon/worker/block/BlockMetricsReporter.html" title="class in tachyon.worker.block"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../tachyon/worker/block/BlockStoreEventListener.html" title="interface in tachyon.worker.block"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?tachyon/worker/block/BlockServiceHandler.html" target="_top">Frames</a></li>
<li><a href="BlockServiceHandler.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">tachyon.worker.block</div>
<h2 title="Class BlockServiceHandler" class="title">Class BlockServiceHandler</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>tachyon.worker.block.BlockServiceHandler</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/WorkerService.Iface.html?is-external=true" title="class or interface in tachyon.thrift">WorkerService.Iface</a></dd>
</dl>
<hr>
<br>
<pre>public final class <span class="strong">BlockServiceHandler</span>
extends <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/WorkerService.Iface.html?is-external=true" title="class or interface in tachyon.thrift">WorkerService.Iface</a></pre>
<div class="block">Handles all thrift RPC calls to the worker. This class is a thrift server implementation and is
 thread safe.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../tachyon/worker/block/BlockServiceHandler.html#BlockServiceHandler(tachyon.worker.block.BlockDataManager)">BlockServiceHandler</a></strong>(<a href="../../../tachyon/worker/block/BlockDataManager.html" title="class in tachyon.worker.block">BlockDataManager</a>&nbsp;worker)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/BlockServiceHandler.html#accessBlock(long)">accessBlock</a></strong>(long&nbsp;blockId)</code>
<div class="block">This should be called whenever a client does a direct read in order to update the worker's
 components that may care about the access times of the blocks (for example, Evictor, UI).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/BlockServiceHandler.html#asyncCheckpoint(long)">asyncCheckpoint</a></strong>(long&nbsp;fileId)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/BlockServiceHandler.html#cacheBlock(long,%20long)">cacheBlock</a></strong>(long&nbsp;sessionId,
          long&nbsp;blockId)</code>
<div class="block">Used to cache a block into Tachyon space, worker will move the temporary block file from
 session folder to data folder, and update the space usage information related.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/BlockServiceHandler.html#cancelBlock(long,%20long)">cancelBlock</a></strong>(long&nbsp;sessionId,
           long&nbsp;blockId)</code>
<div class="block">Used to cancel a block which is being written.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/BlockServiceHandler.html#lockBlock(long,%20long)">lockBlock</a></strong>(long&nbsp;blockId,
         long&nbsp;sessionId)</code>
<div class="block">Lock the file in Tachyon's space while the session is reading it, and the path of the block
 file locked will be returned.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/BlockServiceHandler.html#persistFile(long,%20long,%20java.lang.String)">persistFile</a></strong>(long&nbsp;fileId,
           long&nbsp;nonce,
           <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;path)</code>
<div class="block">This should be called in order to persist a file that was written directly to the under storage
 system via a THROUGH type write.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/BlockServiceHandler.html#promoteBlock(long)">promoteBlock</a></strong>(long&nbsp;blockId)</code>
<div class="block">Used to promote block on under storage layer to top storage layer when there are more than one
 storage layers in Tachyon's space.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/BlockServiceHandler.html#requestBlockLocation(long,%20long,%20long)">requestBlockLocation</a></strong>(long&nbsp;sessionId,
                    long&nbsp;blockId,
                    long&nbsp;initialBytes)</code>
<div class="block">Used to allocate location and space for a new coming block, worker will choose the appropriate
 storage directory which fits the initial block size by some allocation strategy, and the
 temporary file path of the block file will be returned.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/BlockServiceHandler.html#requestSpace(long,%20long,%20long)">requestSpace</a></strong>(long&nbsp;sessionId,
            long&nbsp;blockId,
            long&nbsp;requestBytes)</code>
<div class="block">Used to request space for some block file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/BlockServiceHandler.html#sessionHeartbeat(long,%20java.util.List)">sessionHeartbeat</a></strong>(long&nbsp;sessionId,
                <a href="http://docs.oracle.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&nbsp;metrics)</code>
<div class="block">Local session send heartbeat to local worker to keep its temporary folder.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../tachyon/worker/block/BlockServiceHandler.html#unlockBlock(long,%20long)">unlockBlock</a></strong>(long&nbsp;blockId,
           long&nbsp;sessionId)</code>
<div class="block">Used to unlock a block after the block is accessed, if the block is to be removed, delete the
 block file.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="BlockServiceHandler(tachyon.worker.block.BlockDataManager)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BlockServiceHandler</h4>
<pre>public&nbsp;BlockServiceHandler(<a href="../../../tachyon/worker/block/BlockDataManager.html" title="class in tachyon.worker.block">BlockDataManager</a>&nbsp;worker)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="accessBlock(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>accessBlock</h4>
<pre>public&nbsp;void&nbsp;accessBlock(long&nbsp;blockId)
                 throws <a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/TachyonTException.html?is-external=true" title="class or interface in tachyon.thrift">TachyonTException</a></pre>
<div class="block">This should be called whenever a client does a direct read in order to update the worker's
 components that may care about the access times of the blocks (for example, Evictor, UI).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/WorkerService.Iface.html?is-external=true#accessBlock(long)" title="class or interface in tachyon.thrift">accessBlock</a></code>&nbsp;in interface&nbsp;<code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/WorkerService.Iface.html?is-external=true" title="class or interface in tachyon.thrift">WorkerService.Iface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>blockId</code> - the id of the block to access</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/TachyonTException.html?is-external=true" title="class or interface in tachyon.thrift">TachyonTException</a></code> - if a tachyon error occurs</dd></dl>
</li>
</ul>
<a name="persistFile(long, long, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>persistFile</h4>
<pre>public&nbsp;void&nbsp;persistFile(long&nbsp;fileId,
               long&nbsp;nonce,
               <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;path)
                 throws <a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/TachyonTException.html?is-external=true" title="class or interface in tachyon.thrift">TachyonTException</a>,
                        <a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/ThriftIOException.html?is-external=true" title="class or interface in tachyon.thrift">ThriftIOException</a></pre>
<div class="block">This should be called in order to persist a file that was written directly to the under storage
 system via a THROUGH type write. This will update the master with the appropriate metadata for
 the new block.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/WorkerService.Iface.html?is-external=true#persistFile(long,%20long,%20java.lang.String)" title="class or interface in tachyon.thrift">persistFile</a></code>&nbsp;in interface&nbsp;<code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/WorkerService.Iface.html?is-external=true" title="class or interface in tachyon.thrift">WorkerService.Iface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>fileId</code> - the file id</dd><dd><code>nonce</code> - nonce a nonce used for temporary file creation</dd><dd><code>path</code> - the UFS path of the file</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/TachyonTException.html?is-external=true" title="class or interface in tachyon.thrift">TachyonTException</a></code></dd>
<dd><code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/ThriftIOException.html?is-external=true" title="class or interface in tachyon.thrift">ThriftIOException</a></code></dd></dl>
</li>
</ul>
<a name="asyncCheckpoint(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>asyncCheckpoint</h4>
<pre>public&nbsp;boolean&nbsp;asyncCheckpoint(long&nbsp;fileId)
                        throws <a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/TachyonTException.html?is-external=true" title="class or interface in tachyon.thrift">TachyonTException</a></pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/WorkerService.Iface.html?is-external=true#asyncCheckpoint(long)" title="class or interface in tachyon.thrift">asyncCheckpoint</a></code>&nbsp;in interface&nbsp;<code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/WorkerService.Iface.html?is-external=true" title="class or interface in tachyon.thrift">WorkerService.Iface</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/TachyonTException.html?is-external=true" title="class or interface in tachyon.thrift">TachyonTException</a></code></dd></dl>
</li>
</ul>
<a name="cacheBlock(long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cacheBlock</h4>
<pre>public&nbsp;void&nbsp;cacheBlock(long&nbsp;sessionId,
              long&nbsp;blockId)
                throws <a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/TachyonTException.html?is-external=true" title="class or interface in tachyon.thrift">TachyonTException</a>,
                       <a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/ThriftIOException.html?is-external=true" title="class or interface in tachyon.thrift">ThriftIOException</a></pre>
<div class="block">Used to cache a block into Tachyon space, worker will move the temporary block file from
 session folder to data folder, and update the space usage information related. then update the
 block information to master.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/WorkerService.Iface.html?is-external=true#cacheBlock(long,%20long)" title="class or interface in tachyon.thrift">cacheBlock</a></code>&nbsp;in interface&nbsp;<code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/WorkerService.Iface.html?is-external=true" title="class or interface in tachyon.thrift">WorkerService.Iface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>sessionId</code> - the id of the client requesting the commit</dd><dd><code>blockId</code> - the id of the block to commit</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/TachyonTException.html?is-external=true" title="class or interface in tachyon.thrift">TachyonTException</a></code> - if a tachyon error occurs</dd>
<dd><code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/ThriftIOException.html?is-external=true" title="class or interface in tachyon.thrift">ThriftIOException</a></code> - if an I/O error occurs</dd></dl>
</li>
</ul>
<a name="cancelBlock(long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cancelBlock</h4>
<pre>public&nbsp;void&nbsp;cancelBlock(long&nbsp;sessionId,
               long&nbsp;blockId)
                 throws <a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/TachyonTException.html?is-external=true" title="class or interface in tachyon.thrift">TachyonTException</a>,
                        <a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/ThriftIOException.html?is-external=true" title="class or interface in tachyon.thrift">ThriftIOException</a></pre>
<div class="block">Used to cancel a block which is being written. worker will delete the temporary block file and
 the location and space information related, then reclaim space allocated to the block.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/WorkerService.Iface.html?is-external=true#cancelBlock(long,%20long)" title="class or interface in tachyon.thrift">cancelBlock</a></code>&nbsp;in interface&nbsp;<code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/WorkerService.Iface.html?is-external=true" title="class or interface in tachyon.thrift">WorkerService.Iface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>sessionId</code> - the id of the client requesting the abort</dd><dd><code>blockId</code> - the id of the block to be aborted</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/TachyonTException.html?is-external=true" title="class or interface in tachyon.thrift">TachyonTException</a></code> - if a tachyon error occurs</dd>
<dd><code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/ThriftIOException.html?is-external=true" title="class or interface in tachyon.thrift">ThriftIOException</a></code> - if an I/O error occurs</dd></dl>
</li>
</ul>
<a name="lockBlock(long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockBlock</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;lockBlock(long&nbsp;blockId,
               long&nbsp;sessionId)
                 throws <a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/TachyonTException.html?is-external=true" title="class or interface in tachyon.thrift">TachyonTException</a></pre>
<div class="block">Lock the file in Tachyon's space while the session is reading it, and the path of the block
 file locked will be returned.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/WorkerService.Iface.html?is-external=true#lockBlock(long,%20long)" title="class or interface in tachyon.thrift">lockBlock</a></code>&nbsp;in interface&nbsp;<code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/WorkerService.Iface.html?is-external=true" title="class or interface in tachyon.thrift">WorkerService.Iface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>blockId</code> - the id of the block to be locked</dd><dd><code>sessionId</code> - the id of the session</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/TachyonTException.html?is-external=true" title="class or interface in tachyon.thrift">TachyonTException</a></code> - if a tachyon error occurs</dd></dl>
</li>
</ul>
<a name="promoteBlock(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>promoteBlock</h4>
<pre>public&nbsp;boolean&nbsp;promoteBlock(long&nbsp;blockId)
                     throws <a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/TachyonTException.html?is-external=true" title="class or interface in tachyon.thrift">TachyonTException</a>,
                            <a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/ThriftIOException.html?is-external=true" title="class or interface in tachyon.thrift">ThriftIOException</a></pre>
<div class="block">Used to promote block on under storage layer to top storage layer when there are more than one
 storage layers in Tachyon's space. return true if the block is successfully promoted, false
 otherwise.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/WorkerService.Iface.html?is-external=true#promoteBlock(long)" title="class or interface in tachyon.thrift">promoteBlock</a></code>&nbsp;in interface&nbsp;<code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/WorkerService.Iface.html?is-external=true" title="class or interface in tachyon.thrift">WorkerService.Iface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>blockId</code> - the id of the block to move to the top layer</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/TachyonTException.html?is-external=true" title="class or interface in tachyon.thrift">TachyonTException</a></code> - if a tachyon error occurs</dd>
<dd><code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/ThriftIOException.html?is-external=true" title="class or interface in tachyon.thrift">ThriftIOException</a></code> - if an I/O error occurs</dd></dl>
</li>
</ul>
<a name="requestBlockLocation(long, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>requestBlockLocation</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;requestBlockLocation(long&nbsp;sessionId,
                          long&nbsp;blockId,
                          long&nbsp;initialBytes)
                            throws <a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/TachyonTException.html?is-external=true" title="class or interface in tachyon.thrift">TachyonTException</a>,
                                   <a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/ThriftIOException.html?is-external=true" title="class or interface in tachyon.thrift">ThriftIOException</a></pre>
<div class="block">Used to allocate location and space for a new coming block, worker will choose the appropriate
 storage directory which fits the initial block size by some allocation strategy, and the
 temporary file path of the block file will be returned. if there is no enough space on Tachyon
 storage WorkerOutOfSpaceException will be thrown, if the file is already being written by the
 session, FileAlreadyExistsException will be thrown.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/WorkerService.Iface.html?is-external=true#requestBlockLocation(long,%20long,%20long)" title="class or interface in tachyon.thrift">requestBlockLocation</a></code>&nbsp;in interface&nbsp;<code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/WorkerService.Iface.html?is-external=true" title="class or interface in tachyon.thrift">WorkerService.Iface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>sessionId</code> - the id of the client requesting the create</dd><dd><code>blockId</code> - the id of the new block to create</dd><dd><code>initialBytes</code> - the initial number of bytes to allocate for this block</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/TachyonTException.html?is-external=true" title="class or interface in tachyon.thrift">TachyonTException</a></code> - if a tachyon error occurs</dd>
<dd><code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/ThriftIOException.html?is-external=true" title="class or interface in tachyon.thrift">ThriftIOException</a></code> - if an I/O error occurs</dd></dl>
</li>
</ul>
<a name="requestSpace(long, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>requestSpace</h4>
<pre>public&nbsp;boolean&nbsp;requestSpace(long&nbsp;sessionId,
                   long&nbsp;blockId,
                   long&nbsp;requestBytes)</pre>
<div class="block">Used to request space for some block file. return true if the worker successfully allocates
 space for the block on block’s location, false if there is no enough space.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/WorkerService.Iface.html?is-external=true#requestSpace(long,%20long,%20long)" title="class or interface in tachyon.thrift">requestSpace</a></code>&nbsp;in interface&nbsp;<code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/WorkerService.Iface.html?is-external=true" title="class or interface in tachyon.thrift">WorkerService.Iface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>sessionId</code> - the id of the client requesting space</dd><dd><code>blockId</code> - the id of the block to add the space to, this must be a temporary block</dd><dd><code>requestBytes</code> - the amount of bytes to add to the block</dd></dl>
</li>
</ul>
<a name="unlockBlock(long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unlockBlock</h4>
<pre>public&nbsp;boolean&nbsp;unlockBlock(long&nbsp;blockId,
                  long&nbsp;sessionId)
                    throws <a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/TachyonTException.html?is-external=true" title="class or interface in tachyon.thrift">TachyonTException</a></pre>
<div class="block">Used to unlock a block after the block is accessed, if the block is to be removed, delete the
 block file. return true if successfully unlock the block, return false if the block is not
 found or failed to delete the block.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/WorkerService.Iface.html?is-external=true#unlockBlock(long,%20long)" title="class or interface in tachyon.thrift">unlockBlock</a></code>&nbsp;in interface&nbsp;<code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/WorkerService.Iface.html?is-external=true" title="class or interface in tachyon.thrift">WorkerService.Iface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>blockId</code> - the id of the block to unlock</dd><dd><code>sessionId</code> - the id of the client requesting the unlock</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/TachyonTException.html?is-external=true" title="class or interface in tachyon.thrift">TachyonTException</a></code> - if a tachyon error occurs</dd></dl>
</li>
</ul>
<a name="sessionHeartbeat(long, java.util.List)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>sessionHeartbeat</h4>
<pre>public&nbsp;void&nbsp;sessionHeartbeat(long&nbsp;sessionId,
                    <a href="http://docs.oracle.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&nbsp;metrics)</pre>
<div class="block">Local session send heartbeat to local worker to keep its temporary folder.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/WorkerService.Iface.html?is-external=true#sessionHeartbeat(long,%20java.util.List)" title="class or interface in tachyon.thrift">sessionHeartbeat</a></code>&nbsp;in interface&nbsp;<code><a href="http://tachyon-project.org/tachyon-common/apidocs/tachyon/thrift/WorkerService.Iface.html?is-external=true" title="class or interface in tachyon.thrift">WorkerService.Iface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>sessionId</code> - the id of the client heartbeating</dd><dd><code>metrics</code> - a list of the client metrics that were collected between this heartbeat and the
        last. Each value in the list represents a specific metric based on the index.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BlockServiceHandler.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../tachyon/worker/block/BlockMetricsReporter.html" title="class in tachyon.worker.block"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../tachyon/worker/block/BlockStoreEventListener.html" title="interface in tachyon.worker.block"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?tachyon/worker/block/BlockServiceHandler.html" target="_top">Frames</a></li>
<li><a href="BlockServiceHandler.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2015. All Rights Reserved.</small></p>
</body>
</html>
